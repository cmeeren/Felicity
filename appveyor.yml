image: Visual Studio 2022

build:
  verbosity: detailed

artifacts:
  - path: /src/**/*.nupkg

build_script:
  - cmd: dotnet restore src/Felicity.IntegrationTests --locked-mode
  - cmd: dotnet build src/Felicity.IntegrationTests -c Release --no-restore

test_script:
  - cmd: dotnet test src/Felicity.IntegrationTests -c Release --no-build -- Expecto.fail-on-focused-tests=true

deploy:
  - provider: NuGet
    api_key:
      secure: aGtX9c3v8QqwZU1wzoRmcmpdjaD2hEFHHGN0/uj4IUR6Saj+TIStKoS08NjvcHTY
    on:
      appveyor_repo_tag: true
